<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- runtime API host (useful to force EC2 host at runtime) -->
    <meta name="api-url" content="http://54.167.64.7:8080" />
    <title>Fragments UI</title>
    <link rel="stylesheet" href="https://unpkg.com/bamboo.css" />
    <script type="module" src="./app.js"></script>
  </head>
  <body>
    <h1>Fragments UI</h1>
    <section>
      <nav>
        <button id="login">Login</button>
        <button id="logout" style="margin-left: 8px; display: none">Logout</button>
      </nav>
    </section>
    <section>
      <div id="status" style="margin-top: 8px; color: #333">Status: not initialized</div>
    </section>
    <section hidden id="user">
      <h2>Hello <span class="username"></span>!</h2>
      <form id="create-fragment-form">
        <h3>Create a New Fragment</h3>
        <label for="fragment-type">Content Type:</label><br />
        <select id="fragment-type">
          <option value="text/plain" selected>text/plain</option>
          <option value="text/markdown">text/markdown</option>
          <option value="text/html">text/html</option>
          <option value="text/csv">text/csv</option>
          <option value="application/json">application/json</option>
          <option value="image/png">image/png</option>
          <option value="image/jpeg">image/jpeg</option>
          <option value="image/webp">image/webp</option>
          <option value="image/gif">image/gif</option>
          <option value="image/avif">image/avif</option>
        </select>
        <br /><br />

        <!-- Text input for text-based fragments -->
        <div id="text-input-section">
          <label for="fragment-content">Content:</label><br />
          <textarea
            id="fragment-content"
            rows="6"
            cols="60"
            placeholder="Enter fragment content"
          ></textarea>
        </div>

        <!-- File input for image fragments -->
        <div id="file-input-section" style="display: none">
          <label for="fragment-file">Upload Image File:</label><br />
          <input type="file" id="fragment-file" accept="image/*" />
        </div>
        <br />
        <button id="create-fragment-button" type="button">Create Fragment</button>
        <button id="refresh-fragments-button" type="button" style="margin-left: 8px">
          Refresh List
        </button>
      </form>

      <div id="last-created" style="margin-top: 8px; color: #333">&nbsp;</div>

      <section id="fragments-section" style="margin-top: 16px">
        <h3>Your Fragments</h3>
        <div id="fragments-list">(no fragments yet)</div>
      </section>

      <!-- Update Fragment Section -->
      <section
        id="update-section"
        style="
          display: none;
          margin-top: 24px;
          padding: 16px;
          border: 2px solid #4caf50;
          border-radius: 8px;
          background-color: #f9f9f9;
        "
      >
        <h3>Update Fragment</h3>
        <div id="update-info" style="margin-bottom: 12px; color: #555"></div>
        <div id="update-text-section">
          <label for="update-content">New Content:</label><br />
          <textarea
            id="update-content"
            rows="6"
            cols="60"
            placeholder="Enter new content (same type only)"
          ></textarea>
        </div>
        <div id="update-file-section" style="display: none">
          <label for="update-file">Upload New Image:</label><br />
          <input type="file" id="update-file" accept="image/*" />
        </div>
        <br />
        <button id="update-fragment-button" type="button">Update Fragment</button>
        <button id="cancel-update-button" type="button" style="margin-left: 8px">Cancel</button>
      </section>
    </section>
  </body>
</html>
